## JavaScript ä¸­å¸¸è§è®¾è®¡æ¨¡å¼

- [å•ä¾‹æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/å•ä¾‹æ¨¡å¼.md)
- [ç­–ç•¥æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/ç­–ç•¥æ¨¡å¼.md)
- [ä»£ç†æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/ä»£ç†æ¨¡å¼.md)
- [è¿­ä»£å™¨æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/è¿­ä»£å™¨æ¨¡å¼.md)
- [å‘å¸ƒ-è®¢é˜…æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/å‘å¸ƒè®¢é˜…æ¨¡å¼.md)
- [å‘½ä»¤æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/å‘½ä»¤æ¨¡å¼.md)
- [ç»„åˆæ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/ç»„åˆæ¨¡å¼.md)
- [æ¨¡æ¿æ–¹æ³•æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/æ¨¡æ¿æ–¹æ³•æ¨¡å¼.md)
- [äº«å…ƒæ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/äº«å…ƒæ¨¡å¼.md)
- [èŒè´£é“¾æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/èŒè´£é“¾æ¨¡å¼.md)
- [ä¸­ä»‹è€…æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/ä¸­ä»‹è€…æ¨¡å¼.md)
- [è£…é¥°è€…æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/è£…é¥°è€…æ¨¡å¼.md)
- [çŠ¶æ€æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/çŠ¶æ€æ¨¡å¼.md)
- [é€‚é…è€…æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/é€‚é…è€…æ¨¡å¼.md)
- [è§‚å¯Ÿè€…æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/è§‚å¯Ÿè€…æ¨¡å¼.md)

https://juejin.cn/post/6844903607452581896



## å„è®¾è®¡æ¨¡å¼å…³é”®è¯

çœ‹å®Œäº†ä¸Šè¿°è®¾è®¡æ¨¡å¼åï¼ŒæŠŠå®ƒä»¬çš„å…³é”®è¯ç‰¹ç‚¹ç½—åˆ—å‡ºæ¥ï¼Œä»¥åæåˆ°æŸç§è®¾è®¡æ¨¡å¼ï¼Œè¿›è€Œè”æƒ³ç›¸åº”çš„å…³é”®è¯å’Œä¾‹å­ï¼Œä»è€Œå¿ƒä¸­æœ‰æ•°ã€‚

| è®¾è®¡æ¨¡å¼      | ç‰¹ç‚¹                                   | æ¡ˆä¾‹                                                         |      |
| ------------- | -------------------------------------- | ------------------------------------------------------------ | ---- |
| å•ä¾‹æ¨¡å¼      | ä¸€ä¸ªç±»åªèƒ½æ„é€ å‡ºå”¯ä¸€å®ä¾‹               | [åˆ›å»ºèœå•å¯¹è±¡](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/å•ä¾‹æ¨¡å¼.md) | d    |
| ç­–ç•¥æ¨¡å¼      | æ ¹æ®ä¸åŒå‚æ•°å¯ä»¥å‘½ä¸­ä¸åŒçš„ç­–ç•¥         | [åŠ¨ç”»åº“é‡Œçš„ç®—æ³•å‡½æ•°](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/ç­–ç•¥æ¨¡å¼.md) |      |
| ä»£ç†æ¨¡å¼      | ä»£ç†å¯¹è±¡å’Œæœ¬ä½“å¯¹è±¡å…·æœ‰ä¸€è‡´çš„æ¥å£       | [å›¾ç‰‡é¢„åŠ è½½](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/ä»£ç†æ¨¡å¼.md) |      |
| è¿­ä»£å™¨æ¨¡å¼    | èƒ½è·å–èšåˆå¯¹è±¡çš„é¡ºåºå’Œå…ƒç´              | `each([1, 2, 3], cb)`                                        |      |
| å‘å¸ƒ-è®¢é˜…æ¨¡å¼ | PubSub                                 | [ç€‘å¸ƒæµåº“](https://github.com/MuYunyun/waterfall/blob/0f229c1a2881d26166b92aa746b7f892af59c28f/waterfall.js#L8) |      |
| å‘½ä»¤æ¨¡å¼      | ä¸åŒå¯¹è±¡é—´çº¦å®šå¥½ç›¸åº”çš„æ¥å£             | [æŒ‰é’®å’Œå‘½ä»¤çš„åˆ†ç¦»](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/å‘½ä»¤æ¨¡å¼.md) |      |
| ç»„åˆæ¨¡å¼      | ç»„åˆæ¨¡å¼åœ¨å¯¹è±¡é—´å½¢æˆä¸€è‡´å¯¹å¾…çš„æ ‘å½¢ç»“æ„ | [æ‰«ææ–‡ä»¶å¤¹](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/ç»„åˆæ¨¡å¼.md) |      |
| æ¨¡æ¿æ–¹æ³•æ¨¡å¼  | çˆ¶ç±»ä¸­å®šå¥½æ‰§è¡Œé¡ºåº                     | [å’–å•¡å’ŒèŒ¶](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/æ¨¡æ¿æ–¹æ³•æ¨¡å¼.md) |      |
| äº«å…ƒæ¨¡å¼      | å‡å°‘åˆ›å»ºå®ä¾‹çš„ä¸ªæ•°                     | [ç”·å¥³æ¨¡å…·è¯•è£…](https://github.com/MuYunyun/blog/blob/master/BasicSkill/è®¾è®¡æ¨¡å¼/äº«å…ƒæ¨¡å¼.md) |      |



è®¾è®¡æ¨¡å¼åˆ†ç±»

éƒ½æœ‰å•¥è®¾è®¡æ¨¡å¼ ? ç›¸ä¿¡äº†è§£çš„ï¼Œéƒ½çŸ¥é“æœ‰ 20 å¤šç§...

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8b9cb13628934ad1827434e9a09eb3ea~tplv-k3u1fbpfcp-zoom-1.image)

æŒºå¤šçš„ï¼Œæˆ‘ä¸æ‰¯é‚£ä¹ˆå¤šï¼Œå…¶å®ƒçš„æˆ‘æ²¡ç”¨è¿‡ã€‚ä»€ä¹ˆäº«å…ƒæ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€ç”Ÿæˆå™¨æ¨¡å¼å•¥çš„ï¼Œæˆ‘ç”¨éƒ½æ²¡ç”¨è¿‡ï¼Œæˆ‘å’‹è·Ÿä½ ä»¬èŠå•Šï¼Œæˆ‘ä»Šå¤©å°±å” å—‘å” å—‘å‡ ä¸ªå‰ç«¯å¸¸ç”¨çš„ã€‚

## å•ä¾‹æ¨¡å¼

// å•ä¾‹æ¨¡å¼å³ä¸€ä¸ªç±»åªèƒ½æ„é€ å‡ºå”¯ä¸€å®ä¾‹ï¼Œå•ä¾‹æ¨¡å¼çš„æ„ä¹‰åœ¨äºå…±äº«ã€å”¯ä¸€ï¼ŒRedux/Vuexä¸­çš„storeã€JQçš„$æˆ–è€…ä¸šåŠ¡åœºæ™¯ä¸­çš„è´­ç‰©è½¦ã€ç™»å½•æ¡†éƒ½æ˜¯å•ä¾‹æ¨¡å¼çš„åº”ç”¨



é¢˜ç›®ä¸€

æˆ‘ä»¬å…ˆæ¥åšä¸€ä¸ªé¢˜ï¼Œå¾ˆç®€å•çš„ï¼Œå¤§å®¶è‚¯å®šéƒ½åšè¿‡ `æƒé™é€»è¾‘` åˆ¤æ–­å§ï¼Ÿ

**éœ€æ±‚ : åªç”¨å½“ç”¨æˆ·æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œæ‰èƒ½çœ‹é˜¿å®½çš„è¿™ç¯‡æ–‡ç« **

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/686f57c143284ecf9c00b48f3464b3b8~tplv-k3u1fbpfcp-zoom-1.image)

ç»™å¤§å®¶ `3min`ï¼Œä»£ç æ€ä¹ˆå†™ï¼Ÿ **â€œ å‘µï¼Œä½ è¿™ä¸æ˜¯çœ‹ä¸èµ·è€å¤«å—ï¼Ÿè€å¤«æ‹¿èµ·é”®ç›˜ï¼Œå°±æ˜¯ `if-else` æ¢­å“ˆï¼Œç›´æ¥å¸¦èµ°ï¼Œä¸‹ä¸€ä¸ª ! â€**

```js
function checkAuth(data) {
  if (data.role !== 'juejin') {
    console.log('ä¸æ˜¯æ˜é‡‘ç”¨æˆ·');
    return false;
  }
  if (data.grade < 1) {
    console.log('æ˜é‡‘ç­‰çº§å°äº 1 çº§');
    return false;
  }
  if (data.job !== 'FE') {
    console.log('ä¸æ˜¯å‰ç«¯å¼€å‘');
    return false;
  }
  if (data.type !== 'eat melons') {
    console.log('ä¸æ˜¯åƒç“œç¾¤ä¼—');
    return false;
  }
}
å¤åˆ¶ä»£ç 
```

ç›¸ä¿¡è¿™æ®µä»£ç ï¼Œå¤§å®¶éƒ½ä¼šå†™ï¼Œé‚£ä¹ˆè¿™ä¹ˆå†™ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜ ï¼Ÿ

- checkAuth å‡½æ•°ä¼šçˆ†ç‚¸ ğŸ’¥
- ç­–ç•¥é¡¹æ— æ³•å¤ç”¨
- è¿åå¼€é—­åŸåˆ™ï¼ˆä¸çŸ¥é“å¼€æ”¾å°é—­åŸåˆ™çš„è‡ªè¡Œç™¾åº¦ï¼‰

èªæ˜çš„å°ä¼™ä¼´å·²ç»çŸ¥é“è¿™é‡Œè¦è®²çš„æ˜¯ä»€ä¹ˆæ¨¡å¼äº†ï¼Œå¯¹å¤´ï¼è¿™é‡Œè®²çš„å°±æ˜¯ `ç­–ç•¥æ¨¡å¼`ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼å‘¢ ï¼Ÿ

## ç­–ç•¥æ¨¡å¼

å®šä¹‰ : è¦å®ç°æŸä¸€ä¸ªåŠŸèƒ½ï¼Œæœ‰å¤šç§æ–¹æ¡ˆå¯ä»¥é€‰æ‹©ã€‚æˆ‘ä»¬å®šä¹‰ç­–ç•¥ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’è½¬æ¢ã€‚

å…¶å®ƒå‚è€ƒï¼šhttps://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.md

**ç­–ç•¥ + ç»„åˆï¼Œç»é…å•Šï¼Œè€å“¥ï¼**

æˆ‘ä»¬ç”¨ç­–ç•¥æ¨¡å¼æ¥æ”¹é€ ä»¥ä¸‹è¿™æ®µé€»è¾‘ ğŸ‘‡

```js
// ç»´æŠ¤æƒé™åˆ—è¡¨
const jobList = ['FE', 'BE'];

// ç­–ç•¥
var strategies = {
  checkRole: function(value) {
    return value === 'juejin';
  },
  checkGrade: function(value) {
    return value >= 1;
  },
  checkJob: function(value) {
    return jobList.indexOf(value) > 1;
  },
  checkEatType: function(value) {
    return value === 'eat melons';
  }
};
å¤åˆ¶ä»£ç 
```

æˆ‘ä»¬å·²ç»å†™å®Œäº†ç­–ç•¥ï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯éªŒè¯äº†~

```js
// æ ¡éªŒè§„åˆ™
var Validator = function() {
  this.cache = [];

  // æ·»åŠ ç­–ç•¥äº‹ä»¶
  this.add = function(value, method) {
    this.cache.push(function() {
      return strategies[method](value);
    });
  };

  // æ£€æŸ¥
  this.check = function() {
    for (let i = 0; i < this.cache.length; i++) {
      let valiFn = this.cache[i];
      var data = valiFn(); // å¼€å§‹æ£€æŸ¥
      if (!data) {
        return false;
      }
    }
    return true;
  };
};
å¤åˆ¶ä»£ç 
```

æ­¤æ—¶ï¼Œå°å½­åŒå­¦éœ€è¦è¿›è¡Œæƒé™éªŒè¯çš„æ¡ä»¶ä¸º :

- æ˜é‡‘ç”¨æˆ·
- æ˜é‡‘ç­‰çº§ 1 çº§ä»¥ä¸Š

é‚£ä¹ˆä»£ç å°±å¯ä»¥è¿™ä¹ˆå†™ :

```js
// å°å½­ä½¿ç”¨ç­–ç•¥æ¨¡å¼è¿›è¡Œæ“ä½œ
var compose1 = function() {
  var validator = new Validator();
  const data1 = {
    role: 'juejin',
    grade: 3
  };
  validator.add(data1.role, 'checkRole');
  validator.add(data1.grade, 'checkGrade');
  const result = validator.check();
  return result;
};
å¤åˆ¶ä»£ç 
```

ç„¶åå¦ä¸€ä¸ªå°ä¼™ä¼´é˜¿å®½ï¼Œä»–å¯èƒ½éœ€è¦è¿›è¡Œæƒé™éªŒè¯çš„æ¡ä»¶ä¸º :

- æ˜é‡‘ç”¨æˆ·
- å‰ç«¯å·¥ç¨‹å¸ˆ

é‚£ä¹ˆä»£ç å°±å¯ä»¥è¿™ä¹ˆå†™ :

```js
// é˜¿å®½ä½¿ç”¨ç­–ç•¥æ¨¡å¼è¿›è¡Œæ“ä½œ
var compose2 = function() {
  var validator = new Validator();
  const data2 = {
    role: 'juejin',
    job: 'FE'
  };
  validator.add(data2.role, 'checkRole');
  validator.add(data2.job, 'checkJob');
  const result = validator.check();
  return result;
};
å¤åˆ¶ä»£ç 
```

è¿™æ˜¯ä¸æ˜¯æ¯”ä¸€ç›´ç–¯ç‹‚å†™ `if-else` å¥½å¤ªå¤šäº†å‘¢ï¼Ÿè¿˜æœ‰ä»€ä¹ˆä¾‹å­ï¼Ÿè¡¨å•éªŒè¯å•Š ~ å¯¹äºè¡¨å•å­—æ®µï¼ˆåç§°ã€å¯†ç ã€é‚®ç®±ã€....ï¼‰æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼å»è®¾è®¡ä¼˜åŒ–å®ƒï¼Œæƒ³å•¥å‘¢ï¼Œèµ¶ç´§åŠ¨æ‰‹è¯•ä¸€ä¸‹ï¼æˆ‘éƒ½å·²ç»æ‰‹æŠŠæ‰‹æ•™ä½ åˆ°è¿™äº†~

#### ä»€ä¹ˆæ—¶å€™ç”¨ç­–ç•¥æ¨¡å¼ï¼Ÿ

å½“ä½ è´Ÿè´£çš„æ¨¡å—ï¼ŒåŸºæœ¬æ»¡è¶³ä»¥ä¸‹æƒ…å†µæ—¶

- å„åˆ¤æ–­æ¡ä»¶ä¸‹çš„ç­–ç•¥ç›¸äº’ç‹¬ç«‹ä¸”å¯å¤ç”¨
- ç­–ç•¥å†…éƒ¨é€»è¾‘ç›¸å¯¹å¤æ‚
- ç­–ç•¥éœ€è¦çµæ´»ç»„åˆ





## **å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼š**

é¢˜ç›®äºŒ

å‰é¢è¿˜é€¼é€¼ä¸€ä¸‹ï¼Œè¿™é‡Œç›´æ¥ç»™éœ€æ±‚äº† ğŸ‘‡

**éœ€æ±‚ : ç”³è¯·æˆåŠŸåï¼Œéœ€è¦è§¦å‘å¯¹åº”çš„è®¢å•ã€æ¶ˆæ¯ã€å®¡æ ¸æ¨¡å—å¯¹åº”é€»è¾‘**

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d739205f61014be8a8f0756fcf7c1cfa~tplv-k3u1fbpfcp-zoom-1.image)

æœºæ™ºå¦‚æˆ‘ï¼Œæˆ‘ä¼šå¦‚ä½•åšå‘¢ï¼Ÿ

```js
function applySuccess() {
  // é€šçŸ¥æ¶ˆæ¯ä¸­å¿ƒè·å–æœ€æ–°å†…å®¹
  MessageCenter.fetch();
  // æ›´æ–°è®¢å•ä¿¡æ¯
  Order.update();
  // é€šçŸ¥ç›¸å…³æ–¹å®¡æ ¸
  Checker.alert();
}
```

ä¸å°±è¿™æ ·å†™å—ï¼Œè¿˜æƒ³å’‹æ»´ï¼ï¼ï¼æ˜¯çš„ï¼Œè¿™ä¹ˆå†™æ²¡å¾—æ¯›ç—…ï¼Œä½†æ˜¯å‘¢ï¼Œæˆ‘ä»¬æ¥æ€è€ƒå‡ ä¸ªé—®é¢˜

æ¯”å¦‚ `MessageCenter.fetch()` æ˜¯å°å½­å†™çš„ï¼Œ**ä»–å¤§å§¨å¤«æ¥äº†ï¼Œå¿ƒæƒ…ä¸çˆ½**ï¼ŒæŠŠæ¨¡å—çš„æ–¹æ³•åæ”¹äº†ï¼Œç°åœ¨å« `MessageCenter.request()`ï¼Œä½ å’‹åŠï¼Œä½ è¿™å—é€»è¾‘æ”¹å‘—~

å†æ¯”å¦‚ï¼Œä½ å’Œé˜¿å®½å¹¶è¡Œå¼€å‘çš„ï¼Œé˜¿å®½è´Ÿè´£è®¢å•æ¨¡å—ï¼Œä½ ä¸€æ°”å‘µæˆå†™ä¸‹è¿™æ®µä»£ç ï¼Œç„¶åä¸€è¿è¡Œï¼ŒæŠ¥é”™äº†ï¼Œä¸€è¯¢é—®ï¼Œå‘ç°ï¼Œ**åŸæ¥é˜¿å®½æ˜¨æ™šå»è¹¦è¿ªäº†**ï¼ŒåŸæœ¬ä»Šå¤©åº”è¯¥å®Œæˆçš„è®¢å•æ¨¡å—`Order.update()`ï¼Œå»¶è¿Ÿä¸€å¤©ï¼Œé‚£ä½ å°±åªèƒ½å…ˆæ³¨é‡Šä»£ç ï¼Œç­‰ä¾èµ–çš„æ¨¡å—å¼€å‘å®Œäº†ï¼Œä½ å†å›æ¥æ·»åŠ è¿™æ®µé€»è¾‘å’¯~

æ›´å¯æ€•çš„æ˜¯ï¼Œä½ å¯èƒ½ä¸åªæ˜¯æ¶‰åŠåˆ°è¿™ä¸‰ä¸ªæ¨¡å—ï¼Œmaybe è¿˜æœ‰å¾ˆå¤šæ¨¡å—ï¼Œæ¯”å¦‚ä½ ç”³è¯·æˆåŠŸï¼Œç°åœ¨è¿˜éœ€è¦ä¸ŠæŠ¥ç”³è¯·æ—¥å¿—ï¼Œä½ æ€»ä¸èƒ½è¿™æ ·å†™å§ï¼Ÿ

```js
function applySuccess() {
  // é€šçŸ¥æ¶ˆæ¯ä¸­å¿ƒè·å–æœ€æ–°å†…å®¹
  MessageCenter.fetch();
  // æ›´æ–°è®¢å•ä¿¡æ¯
  Order.update();
  // é€šçŸ¥ç›¸å…³æ–¹å®¡æ ¸
  Checker.alert();

  // maybe æ›´å¤š
  Log.write();
  ...
}
å¤åˆ¶ä»£ç 
```

åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ `å‘å¸ƒ-è®¢é˜…æ¨¡å¼` è¦æŒ‰æºä¸ä½äº†ã€‚

### å®šä¹‰

å‘å¸ƒ-è®¢é˜…æ˜¯ä¸€ç§æ¶ˆæ¯èŒƒå¼ï¼Œæ¶ˆæ¯çš„å‘å¸ƒè€…ï¼Œä¸ä¼šå°†æ¶ˆæ¯ç›´æ¥å‘é€ç»™ç‰¹å®šçš„`è®¢é˜…è€…`ï¼Œè€Œæ˜¯é€šè¿‡æ¶ˆæ¯é€šé“å¹¿æ’­å‡ºå»ï¼Œç„¶åå‘¢ï¼Œè®¢é˜…è€…é€šè¿‡è®¢é˜…è·å–åˆ°æƒ³è¦çš„æ¶ˆæ¯ã€‚

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/66f97bd23566468182554fbac39fd009~tplv-k3u1fbpfcp-zoom-1.image)

å•Šå“ˆå“ˆå“ˆï¼Œæœ‰æ²¡æœ‰è§‰å¾—è¿™ä¸ª`EventEmitter`å¥½ç†Ÿæ‚‰å•Šï¼Œè¿™ä¸æ˜¯é¢è¯•å¸¸ä¼šé—®çš„ï¼Ÿ

æˆ‘ä»¬ç”¨ å‘å¸ƒ-è®¢é˜…æ¨¡å¼ ä¿®æ”¹ä»¥ä¸‹ä¸Šè¾¹çš„ä»£ç  ğŸ‘‡

```js
const EventEmit = function() {
  this.events = {};
  this.on = function(name, cb) {
    if (this.events[name]) {
      this.events[name].push(cb);
    } else {
      this.events[name] = [cb];
    }
  };
  this.trigger = function(name, ...arg) {
    if (this.events[name]) {
      this.events[name].forEach(eventListener => {
        eventListener(...arg);
      });
    }
  };
};
```

ä¸Šè¾¹æˆ‘ä»¬å†™å¥½äº†ä¸€ä¸ª `EventEmit`ï¼Œç„¶åæˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç å¯ä»¥æ”¹æˆè¿™æ · ~

```js
let event = new EventEmit();
event.trigger('success');

MessageCenter.fetch() {
  event.on('success', () => {
    console.log('æ›´æ–°æ¶ˆæ¯ä¸­å¿ƒ');
  });
}
Order.update() {
  event.on('success', () => {
    console.log('æ›´æ–°è®¢å•ä¿¡æ¯');
  });
}
Checker.alert() {
  event.on('success', () => {
    console.log('é€šçŸ¥ç®¡ç†å‘˜');
  });
}
å¤åˆ¶ä»£ç 
```

ä½†æ˜¯è¿™æ ·å°±æ²¡é—®é¢˜äº†å—ï¼Ÿå…¶å®è¿˜æ˜¯æœ‰å¼Šç«¯çš„ï¼Œæ¯”å¦‚è¯´ï¼Œè¿‡å¤šçš„ä½¿ç”¨å‘å¸ƒè®¢é˜…ï¼Œå°±ä¼šå¯¼è‡´éš¾ä»¥ç»´æŠ¤è°ƒç”¨å…³ç³»ã€‚æ‰€ä»¥ï¼Œè¿˜æ˜¯çœ‹å¤§å®¶çš„è®¾è®¡å§ï¼Œè¿™é‡Œåªæ˜¯è®©å¤§å®¶çŸ¥é“ï¼Œå‘å¸ƒè®¢é˜…æ¨¡å¼æ˜¯ä¸ªå•¥~

### ä»€ä¹ˆæ—¶å€™ç”¨å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼Ÿ

å½“ä½ è´Ÿè´£çš„æ¨¡å—ï¼ŒåŸºæœ¬æ»¡è¶³ä»¥ä¸‹æƒ…å†µæ—¶

- å„æ¨¡å—ç›¸äº’ç‹¬ç«‹
- å­˜åœ¨ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»
- ä¾èµ–æ¨¡å—ä¸ç¨³å®šã€ä¾èµ–å…³ç³»ä¸ç¨³å®š
- å„æ¨¡å—ç”±ä¸åŒçš„äººå‘˜ã€å›¢é˜Ÿå¼€å‘

> æˆ‘çŸ¥é“ä½ æœ‰ç–‘é—®ï¼Œå…³äº è§‚å¯Ÿè€…æ¨¡å¼ VS å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä¸è®²å®ƒä»¬çš„åŒºåˆ†ï¼Œä¸‹æœŸå†èŠï¼Œæˆ–è€…è‡ªè¡Œèµ„æ–™æŸ¥è¯¢

é¢˜ç›®ä¸‰

è¿™ä¸ªé¢˜ç›®ï¼Œä¹Ÿæœ‰ç‚¹éš¾æƒ³å•Šï¼Œæˆ‘ç›´æ¥è¯´å§ï¼Œä¸»è¦è®² **è£…é¥°å™¨æ¨¡å¼**ã€**é€‚é…å™¨æ¨¡å¼**ã€‚

### è£…é¥°å™¨æ¨¡å¼

> ä¸ªäººç†è§£ : æ˜¯ä¸ºäº†ç»™ä¸€ä¸ªå‡½æ•°èµ‹èƒ½ï¼Œå¢å¼ºå®ƒçš„æŸç§èƒ½åŠ›ï¼Œå®ƒèƒ½åŠ¨æ€çš„æ·»åŠ å¯¹è±¡çš„è¡Œä¸ºï¼Œä¹Ÿå°±æ˜¯æˆ‘ä¼ å…¥çš„å°±æ˜¯ä¸€ä¸ªå¯¹è±¡

> åœ¨ JS ä¸–ç•Œä¸­ï¼Œä¸–é—´ä¸‡ç‰©ï¼Œçš†ä¸ºå¯¹è±¡

å¤§å®¶è¿‡å¹´ï¼Œéƒ½ä¼šä¹°æ¡”å­æ ‘å§ï¼ˆä¸ä¹°çš„ç»Ÿä¸€å¸¦èµ°ï¼‰ï¼Œæ„å‘³â€œå¤§å‰å¤§åˆ©â€å˜›ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹°äº†æ¡”å­æ ‘ä¹‹åï¼Œéƒ½ä¼šå¾€ä¸Šè¾¹æŒ‚ä¸€äº›çº¢åŒ…ï¼Œæ‘‡èº«ä¸€å˜ï¼Œâ€œçº¢åŒ…æ¡”å­æ ‘â€ï¼Œç‰›æ°ï¼è¿™ä¸ªçš„çº¢åŒ…å°±æ˜¯**è£…é¥°å™¨**ï¼Œå®ƒä¸å¯¹æ¡”å­æ ‘åŸæœ‰çš„åŠŸèƒ½äº§ç”Ÿå½±å“ã€‚

å†ä¸¾ä¸ª ğŸŒ°ï¼Œæˆ‘ç°åœ¨å†™çš„è¿™è¾¹æ–‡ç« ï¼Œæˆ‘åªä¼šå†™ä¸­æ–‡ï¼Œä½†æ˜¯å„ä½çœ‹å®˜ä¸­æœ‰è‹±å›½å°ä¼™ä¼´ï¼Œé‚£æˆ‘ä¸ä¼šå†™è‹±æ–‡å•Šï¼Œæ‰€ä»¥æˆ‘éœ€è¦é€šè¿‡è£…é¥°å™¨æ¥èµ‹äºˆæˆ‘å†™è‹±æ–‡çš„èƒ½åŠ›



ä½ è¿™ä¸æ˜¯åœ¨çœŸå®å†™ä»£ç ä¸­çš„å•Šï¼Œèƒ½ä¸èƒ½ä¸¾ä¸€ä¸ªæ—¥å¸¸å¼€å‘çš„ ğŸŒ°ï¼Œokï¼Œé‚£æˆ‘æ¥ä¸¾ä¸€ä¸ªï¼ŒReact ä¸­çš„é«˜é˜¶ç»„ä»¶ HOC

äº†è§£ React çš„éƒ½çŸ¥é“ï¼Œé«˜é˜¶ç»„ä»¶å…¶å®å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚

é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å†™ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ HOCï¼Œç”¨å®ƒæ¥è£…é¥° `Target Component`

```js
import React from 'react';

const yellowHOC = WrapperComponent => {
  return class extends React.Component {
    render() {
      <div style={{ backgroundColor: 'yellow' }}>
        <WrapperComponent {...this.props} />
      </div>;
    }
  };
};

export default yellowHOC;
å¤åˆ¶ä»£ç 
```

å®šä¹‰äº†ä¸€ä¸ªå¸¦æœ‰è£…é¥°é»„è‰²èƒŒæ™¯çš„é«˜é˜¶ç»„ä»¶ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥è£…é¥°ç›®æ ‡ç»„ä»¶

```js
import React from 'react';
import yellowHOC from './yellowHOC';

class TargetComponent extends Reac.Compoment {
  render() {
    return <div>66666</div>;
  }
}

export default yellowHOC(TargetComponent);
å¤åˆ¶ä»£ç 
```

ä½ çœ‹ï¼Œæˆ‘ä»¬è¿™ä¸å°±ç”¨åˆ°äº†è£…é¥°å™¨æ¨¡å¼äº†å˜›ï¼Ÿä»€ä¹ˆï¼Œä½ è¿˜å¬ä¸æ‡‚ï¼Ÿé‚£æˆ‘æœ€åå†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œä¸çŸ¥é“è¿™ä¸ªä¾‹å­ï¼Œèƒ½ä¸èƒ½å¸®åŠ©ä½ ä»¬ç†è§£

```js
const kuanWrite = function() {
  this.writeChinese = function() {
    console.log('æˆ‘åªä¼šå†™ä¸­æ–‡');
  };
};

// é€šè¿‡è£…é¥°å™¨ç»™é˜¿å®½åŠ ä¸Šå†™è‹±æ–‡çš„èƒ½åŠ›
const Decorator = function(old) {
  this.oldWrite = old.writeChinese;
  this.writeEnglish = function() {
    console.log('ç»™é˜¿å®½èµ‹äºˆå†™è‹±æ–‡çš„èƒ½åŠ›');
  };
  this.newWrite = function() {
    this.oldWrite();
    this.writeEnglish();
  };
};

const oldKuanWrite = new kuanWrite();
const decorator = new Decorator(oldKuanWrite);
decorator.newWrite();
å¤åˆ¶ä»£ç 
```

## é€‚é…å™¨æ¨¡å¼

> ä¸ªäººç†è§£ï¼Œä¸ºäº†è§£å†³æˆ‘ä»¬ä¸å…¼å®¹çš„é—®é¢˜ï¼ŒæŠŠä¸€ä¸ªç±»çš„æ¥å£æ¢æˆæˆ‘ä»¬æƒ³è¦çš„æ¥å£ã€‚

ä¸¾ä¸ª ğŸŒ° , æˆ‘æƒ³å¬æ­Œçš„æ—¶å€™ï¼Œæˆ‘å‘ç°æˆ‘æ²¡å¸¦è€³æœºï¼Œæˆ‘çš„æ‰‹æœºæ˜¯ iphone çš„ï¼Œè€Œç°åœ¨æˆ‘åªæœ‰ä¸€ä¸ª Type-C çš„è€³æœºï¼Œä¸ºäº†èƒ½å¤Ÿå¬æ­Œï¼Œæˆ‘ç”¨äº†ä¸€ä¸ªè½¬æ¢å™¨ï¼ˆä¹Ÿå°±æ˜¯é€‚é…å™¨ï¼‰ï¼Œç„¶åæˆ‘å°±å¯ä»¥å¼€å¿ƒçš„å¬æ­Œäº†ã€‚

æˆ‘ä¸¾ä¸ªçœŸå®ä¸šåŠ¡ä¸­çš„ä¾‹å­ï¼Œå‰æ®µæ—¶é—´éœ€è¦åšä¸€ä¸ªéœ€æ±‚ï¼Œæ˜¯è¿™æ ·çš„ã€‚

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e863ff0e86244439aafdf8c3d3d9ca3~tplv-k3u1fbpfcp-watermark.image)

çœ‹è¿™ä¸ªå›¾ï¼Œå›¾ä¸­çº¢è‰²æ–¹æ¡†åŒºåŸŸæ˜¯ä¸€ä¸ªèµ„æºåˆ—è¡¨å±•ç¤ºç»„ä»¶ï¼Œè¯¥åˆ—è¡¨æ•°æ®ï¼Œæœ‰**ä¸‰å¤„æ¥æº**ï¼šæœ¬åœ°ä¸Šä¼ ã€èµ„æºåˆ—è¡¨æ·»åŠ ã€åå°è¿”å›èµ„æºã€‚

æ€ä¹ˆç†è§£å‘¢ï¼Ÿå¯ä»¥çœ‹åˆ°å›¾ä¸­ï¼Œè¯¥æµç¨‹ä¸»è¦æ˜¯ï¼š

- å³è¾¹çš„â€œèµ„æºæ¦‚å†µâ€æ˜¯è°ƒæ¥å£ï¼Œè¿”å›çš„ä¸€ä¸ª MaterialsList ï¼Œå¯ä»¥ä»å³è¾¹ç‚¹å‡» â€œ+â€ æ·»åŠ è¿›æ¥
- ä¹Ÿå¯ä»¥é€šè¿‡é€‰æ‹©æœ¬åœ°æ–‡ä»¶ä¸Šä¼ 
- å¦‚æœæ˜¯ç¼–è¾‘åœºæ™¯ä¸‹ï¼Œè¿˜æœ‰åå°æ¥å£è¿”å›çš„æ•°æ®

ç”±äºå†å²åŸå› å’Œä¹‹å‰åå°æ¥å£è¿”å›çš„æ•°æ®ç»“æ„é—®é¢˜ï¼Œè¿™ä¸‰ä¸ªæ•°æ®æ ¼å¼æ˜¯ä¸åŒçš„ã€‚

```typescript
// æœ¬åœ°èµ„æºæ–‡ä»¶ä¸Šä¼ ä¹‹åçš„æ•°æ®ç»“æ„
export interface ResourceLocalFileType {
  uuid: string;
  name: string;
  size: number;
  created: number;
  lastModified: number;
  resourceType: number;
  cancel: () => void;
  status: string;
}
å¤åˆ¶ä»£ç 
// èµ„æºæ¦‚å†µæ¥å£è¿”å›çš„æ•°æ®ç»“æ„
export interface ResourcePackageFileType {
  uuid: string;
  materialName: string;
  materialLink: string;
  materialType: number;
  uid?: string;
  ext?: string;
}
å¤åˆ¶ä»£ç 
// åŸå…ˆæ•°æ®åå°è¿”å›çš„æ•°æ®æ¥å£
export interface ResourceBackendFileType {
  uuid: string;
  resourceName: string;
  resourceLink: string;
  resourceType: number;
  version: string;
  ext: string;
}
å¤åˆ¶ä»£ç 
```

å¾ˆè›‹ç–¼ï¼Œä¸‰ä¸ªæ•°æ®æ¥æºï¼Œä¸‰ç§æ—¶å€™æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬çš„èµ„æºåˆ—è¡¨ç»„ä»¶æ˜¯åªèƒ½æ¥æ”¶ä¸€ç§æ•°æ®æ ¼å¼çš„åˆ—è¡¨ï¼Œæˆ‘ä¸æƒ³ç ´åçº¯å±•ç¤ºå‹ç»„ä»¶çš„å†…éƒ¨é€»è¾‘ï¼Œ**æƒ³ä¿æŒè¯¥ç»„ä»¶çš„èŒè´£ï¼šå±•ç¤ºï¼**

é‚£è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿ**é‡‡ç”¨é€‚é…å™¨æ¨¡å¼ï¼Œå°†ä¸åŒçš„æ•°æ®ç»“æ„é€‚é…æˆå±•ç¤ºç»„ä»¶æ‰€èƒ½æ¥å—çš„æ•°æ®ç»“æ„**

é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„æ•°æ®æ ¼å¼ï¼šAdapterResourceFileType

```typescript
export interface AdapterResourceType {
  uuid: string;
  created: number;
  fileNo: number;
  fileName: string;
  fileOrigin: string;
  fileStatus: string;
  fileInfo: {
    type: number;
    size?: number;
    [key: string]: any;
  };
  // æœ¬åœ°å›¾ç‰‡é¢å¤–æ“ä½œ
  action?: {
    cancel?: () => void;
    [key: string]: any;
  };
}
å¤åˆ¶ä»£ç 
```

ç„¶åé€šè¿‡é€‚é…å™¨æ¨¡å—ï¼Œé€‚é…æˆæˆ‘ä»¬éœ€è¦çš„æ¥å£APIã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f7e962936607400bb152a3d49a46cd26~tplv-k3u1fbpfcp-watermark.image)

åœ¨æ•°æ®è¿›è¡Œç»„ä»¶åˆ—è¡¨å±•ç¤ºæ—¶ï¼Œå°†æ¥æºä¸åŒçš„æ•°æ®ç»è¿‡é€‚é…å™¨å¤„ç†ï¼Œè¿›è¡Œæ•´åˆï¼Œç„¶åä¼ é€’ç»™å±•ç¤ºç»„ä»¶ï¼Œä»¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be9b40b244fb434ba3d03ea8b895becd~tplv-k3u1fbpfcp-watermark.image)

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1dffc52d3ed041b4a9c82e95f0f8518e~tplv-k3u1fbpfcp-watermark.image)

å¯èƒ½æœ‰äººè§‰å¾—ï¼Œè¿™å°±æ˜¯é€‚é…å™¨ï¼Ÿä½ åœ¨é€—æˆ‘ï¼Ÿæˆ‘æƒ³è¯´ : _________





## è§‚å¯Ÿè€…æ¨¡å¼

åº”ç”¨åœºæ™¯:

1. åœºæ™¯ä¸€: å½“è§‚å¯Ÿçš„æ•°æ®å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶, è‡ªåŠ¨è°ƒç”¨ç›¸åº”å‡½æ•°ã€‚æ¯”å¦‚ vue çš„åŒå‘ç»‘å®š;
2. åœºæ™¯äºŒ: æ¯å½“è°ƒç”¨å¯¹è±¡é‡Œçš„æŸä¸ªæ–¹æ³•æ—¶, å°±ä¼šè°ƒç”¨ç›¸åº”'è®¿é—®'é€»è¾‘ã€‚æ¯”å¦‚ç»™æµ‹è¯•æ¡†æ¶èµ‹èƒ½çš„ spy å‡½æ•°;

### åœºæ™¯ä¸€: åŒå‘ç»‘å®š

#### Object.defineProperty

ä½¿ç”¨ `Object.defineProperty(obj, props, descriptor)` å®ç°è§‚å¯Ÿè€…æ¨¡å¼, å…¶ä¹Ÿæ˜¯ [vue åŒå‘ç»‘å®š](https://github.com/MuYunyun/blog/issues/11) çš„æ ¸å¿ƒ, ç¤ºä¾‹å¦‚ä¸‹(å½“æ”¹å˜ obj ä¸­çš„ value çš„æ—¶å€™, è‡ªåŠ¨è°ƒç”¨ç›¸åº”ç›¸å…³å‡½æ•°):

```
var obj = {
  data: { list: [] },
}

Object.defineProperty(obj, 'list', {
  get() {
    return this.data['list']
  },
  set(val) {
    console.log('å€¼è¢«æ›´æ”¹äº†')
    this.data['list'] = val
  }
})
```

#### Proxy

Proxy/Reflect æ˜¯ ES6 å¼•å…¥çš„æ–°ç‰¹æ€§, ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®Œæˆè§‚å¯Ÿè€…æ¨¡å¼, ç¤ºä¾‹å¦‚ä¸‹(æ•ˆæœåŒä¸Š):

```
var obj = {
  value: 0
}

var proxy = new Proxy(obj, {
  set: function(target, key, value, receiver) { // {value: 0}  "value"  1  Proxy {value: 0}
    console.log('è°ƒç”¨ç›¸åº”å‡½æ•°')
    Reflect.set(target, key, value, receiver)
  }
})

proxy.value = 1 // è°ƒç”¨ç›¸åº”å‡½æ•°
```

### åœºæ™¯äºŒ

ä¸‹é¢æ¥å®ç° sinon æ¡†æ¶çš„ spy å‡½æ•°:

```
const sinon = {
  analyze: {},
  spy: function(obj, fnName) {
    const that = this
    const oldFn = Object.getOwnPropertyDescriptor(obj, fnName).value
    Object.defineProperty(obj, fnName, {
      value: function() {
        oldFn()
        if (that.analyze[fnName]) {
          that.analyze[fnName].count = ++that.analyze[fnName].count
        } else {
          that.analyze[fnName] = {}
          that.analyze[fnName].count = 1
        }
        console.log(`${fnName} è¢«è°ƒç”¨äº† ${that.analyze[fnName].count} æ¬¡`)
      }
    })
  }
}

const obj = {
  someFn: function() {
    console.log('my name is someFn')
  }
}

sinon.spy(obj, 'someFn')

obj.someFn()
// my name is someFn
// someFn è¢«è°ƒç”¨äº† 1 æ¬¡
obj.someFn()
// my name is someFn
// someFn è¢«è°ƒç”¨äº† 2 æ¬¡
```

### `vue` åœ¨ 3.0 ç‰ˆæœ¬ä¸Šä½¿ç”¨ `Proxy` é‡æ„çš„åŸå› 

é¦–å…ˆç½—åˆ— `Object.defineProperty()` çš„ç¼ºç‚¹:

1. `Object.defineProperty()` ä¸ä¼šç›‘æµ‹åˆ°æ•°ç»„å¼•ç”¨ä¸å˜çš„æ“ä½œ(æ¯”å¦‚ `push/pop` ç­‰);
2. `Object.defineProperty()` åªèƒ½ç›‘æµ‹åˆ°å¯¹è±¡çš„å±æ€§çš„æ”¹å˜, å³å¦‚æœæœ‰æ·±åº¦åµŒå¥—çš„å¯¹è±¡åˆ™éœ€è¦å†æ¬¡ç»™ä¹‹ç»‘å®š `Object.defineProperty()`;

å…³äº `Proxy` çš„ä¼˜ç‚¹

1. å¯ä»¥åŠ«æŒæ•°ç»„çš„æ”¹å˜;
2. `defineProperty` æ˜¯å¯¹å±æ€§çš„åŠ«æŒ, `Proxy` æ˜¯å¯¹å¯¹è±¡çš„åŠ«æŒ;
3. 

é¢˜ç›®å››

## ä»£ç†æ¨¡å¼

æˆ‘ä»¬å†æ¥è®²ä¸€ä¸ªå«åš **ä»£ç†æ¨¡å¼**ï¼Œè¯´åˆ°ä»£ç†å“ˆï¼Œæˆ‘è„‘æµ·é‡Œç¬¬ä¸€ä¸ªæµ®ç°çš„è¯è¯­ : â€œäº‹ä»¶å§”æ‰˜ã€äº‹ä»¶ä»£ç†â€ï¼Œè¿™ç®—å—ï¼Ÿç®—å“’ã€‚æˆ‘ä¸¾äº› ğŸŒ°ï¼Œè®©å¤§å®¶çŸ¥é“ä»£ç†æ¨¡å¼æ˜¯ä¸ªå•¥ç©æ„

ä½œä¸ºç¨‹åºå‘˜å˜›ï¼Œå¥³æœ‹å‹æ¯”è¾ƒéš¾æ‰¾ï¼Œå°±ç®—æ‰¾åˆ°äº†ï¼Œå’±è¿™ä¹ˆç˜¦å¼±ï¼Œæ€•æ˜¯ä¿æŠ¤ä¸äº†å•Šï¼Œæ‰€ä»¥æˆ‘èŠ±é’±æ‰¾äº†ä¸ªä¿é•–æ¥ä¿æŠ¤æˆ‘ï¼Œç¨³å¦¥ã€‚è¿™å°±æ˜¯ä»£ç†æ¨¡å¼ã€‚

ä½ ç¿»qiangå—ï¼Ÿä½ èƒ½ google å—ï¼Ÿè€å®äººå“ªä¼šä»€ä¹ˆç¿»qiangï¼Œæˆ‘æ˜¯ä¸ä¼šçš„ï¼Œä¼šæˆ‘ä¹Ÿè¯´æˆ‘ä¸ä¼šã€‚å…¶å®æ­£å¸¸æ¥è®²ï¼Œæˆ‘ä»¬ç›´æ¥è®¿é—® google æ˜¯æ— å“åº”çš„ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹ä»£ç†æœåŠ¡å™¨ã€‚å°é£æœºï¼Ÿæ‡‚ ï¼Ÿ

è¦è¯´åˆä¸­éä¸»æµä¸‰å¤§å·¨å¤´ï¼Œè«è¿‡äº `è®¸åµ©ã€å¾è‰¯ã€æ±ªè‹æ³·`äº†ï¼Œå»å¹´æƒ³å»çœ‹è®¸åµ©æ¼”å”±ä¼šï¼Œå¥½å®¶ä¼™ï¼Œè¿™ä¸ªæ¼”å”±ä¼šçš„é—¨ç¥¨éƒ½è¢«æŠ¢å…‰äº†ï¼Œæ— å¥ˆä¹‹ä¸‹ï¼Œåªèƒ½æ‰¾é»„ç‰›ï¼Œè¿™é‡Œï¼Œé»„ç‰›å°±èµ·äº†ä»£ç†çš„ä½œç”¨ï¼Œæ‡‚ï¼Ÿ

ç¨‹åºä¸–ç•Œçš„ä»£ç†è€…ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¸ç›´æ¥æ“ä½œåŸæœ‰å¯¹è±¡ï¼Œè€Œæ˜¯å§”æ‰˜ä»£ç†è€…å»è¿›è¡Œã€‚ä»£ç†è€…çš„ä½œç”¨ï¼Œå°±æ˜¯å¯¹æˆ‘ä»¬çš„è¯·æ±‚é¢„å…ˆè¿›è¡Œå¤„ç†æˆ–è½¬æ¥ç»™å®é™…å¯¹è±¡ã€‚

> ä»£ç†æ¨¡å¼æ˜¯ä¸ºå…¶å®ƒå¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥**æ§åˆ¶**è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œå…·ä½“æ‰§è¡Œçš„åŠŸèƒ½è¿˜æ˜¯è¿™ä¸ªå¯¹è±¡æœ¬èº«ï¼Œå°±æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å‘é‚®ä»¶ï¼Œé€šè¿‡ä»£ç†æ¨¡å¼ï¼Œé‚£ä¹ˆä»£ç†è€…å¯ä»¥æ§åˆ¶ï¼Œå†³å®šå‘è¿˜æ˜¯ä¸å‘ï¼Œä½†å…·ä½“å‘çš„æ‰§è¡ŒåŠŸèƒ½ï¼Œæ˜¯å¤–éƒ¨å¯¹è±¡æ‰€å†³å®šï¼Œè€Œä¸æ˜¯ä»£ç†è€…å†³å®šã€‚

å…¶å®ƒï¼šhttps://github.com/MuYunyun/blog/blob/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.md

```js
// å‘é‚®ä»¶ï¼Œä¸æ˜¯qqé‚®ç®±çš„æ‹¦æˆª
const emailList = ['qq.com', '163.com', 'gmail.com'];

// ä»£ç†
const ProxyEmail = function(email) {
  if (emailList.includes(email)) {
    // å±è”½å¤„ç†
  } else {
    // è½¬å‘ï¼Œè¿›è¡Œå‘é‚®ä»¶
    SendEmail.call(this, email);
  }
};

const SendEmail = function(email) {
  // å‘é€é‚®ä»¶
};

// å¤–éƒ¨è°ƒç”¨ä»£ç†
ProxyEmail('cvte.com');
ProxyEmail('ojbk.com');
å¤åˆ¶ä»£ç 
```

ä¸‹è¾¹å†æ¥ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæ¥è‡³ ã€ŠJavaScript è®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹

```js
// æœ¬ä½“
var domImage = (function() {
  var imgEle = document.createElement('img');
  document.body.appendChild(imgEle);
  return {
    setSrc: function(src) {
      imgEle.src = src;
    }
  };
})();

// å›¾ç‰‡é¢„åŠ è½½ä»£ç†
var proxyImage = (function() {
  var img = new Image();
  img.onload = function() {
    domImage.setSrc(this.src); // å›¾ç‰‡åŠ è½½å®Œè®¾ç½®çœŸå®å›¾ç‰‡src
  };
  return {
    setSrc: function(src) {
      domImage.setSrc('./loading.gif'); // é¢„å…ˆè®¾ç½®å›¾ç‰‡srcä¸ºloadingå›¾
      img.src = src;
    }
  };
})();

// å¤–éƒ¨è°ƒç”¨
proxyImage.setSrc('./product.png');
å¤åˆ¶ä»£ç 
```

#### ä»€ä¹ˆæ—¶å€™ç”¨ä»£ç†æ¨¡å¼ï¼Ÿ

å½“ä½ è´Ÿè´£çš„æ¨¡å—ï¼ŒåŸºæœ¬æ»¡è¶³ä»¥ä¸‹æƒ…å†µæ—¶

- æ¨¡å—èŒè´£å•ä¸€ä¸”å¯å¤ç”¨
- ä¸¤ä¸ªæ¨¡å—é—´çš„äº¤äº’éœ€è¦ä¸€å®šé™åˆ¶å…³ç³»

> è¿™é‡Œæˆ‘åˆçŸ¥é“ä½ æœ‰ç–‘é—®äº†ï¼Œå…³äº ä»£ç†æ¨¡å¼ VS è£…é¥°è€…æ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä¸è®²å®ƒä»¬çš„åŒºåˆ†ï¼Œä¸‹æœŸå†èŠï¼Œæˆ–è€…è‡ªè¡Œèµ„æ–™æŸ¥è¯¢

é¢˜ç›®äº”

éœ€æ±‚ ï¼šå¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬ç”³è¯·è®¾å¤‡ä¹‹åï¼Œæ¥ä¸‹æ¥è¦é€‰æ‹©æ”¶è´§åœ°å€ï¼Œç„¶åé€‰æ‹©è´£ä»»äººï¼Œè€Œä¸”å¿…é¡»æ˜¯ä¸Šä¸€ä¸ªæˆåŠŸï¼Œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ª~

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/25f01997107e4fe98222ef908f1c7cbe~tplv-k3u1fbpfcp-zoom-1.image)

å°ä¼™ä¼´ä»¬æƒŠè®¶äº†ï¼Œè¿™ä¸ç®€å•å˜›ï¼Ÿå¥¥åŠ›ç»™ï¼

```js
function applyDevice(data) {
  // å¤„ç†å·´æ‹‰å·´æ‹‰...
  let devices = {};
  let nextData = Object.assign({}, data, devices);
  // æ‰§è¡Œé€‰æ‹©æ”¶è´§åœ°å€
  selectAddress(nextData);
}

function selectAddress(data) {
  // å¤„ç†å·´æ‹‰å·´æ‹‰...
  let address = {};
  let nextData = Object.assign({}, data, address);
  // æ‰§è¡Œé€‰æ‹©è´£ä»»äºº
  selectChecker(nextData);
}

function selectChecker(data) {
  // å¤„ç†å·´æ‹‰å·´æ‹‰...
  let checker = {};
  let nextData = Object.assign({}, data, checker);
  // è¿˜æœ‰æ›´å¤š
}
å¤åˆ¶ä»£ç 
```

ä½ çœ‹ï¼Œè¿™ä¸å°±å®Œäº‹äº†ï¼Œæœ‰å•¥éš¾çš„ï¼Œç„¶åè¿‡äº†ç¬¬äºŒå¤©ï¼Œä½ åˆæ¥äº†ä¸¤ä¸ªæ–°çš„æµç¨‹éœ€æ±‚ï¼Œå¯èƒ½ä¸€ä¸ªå°±ä¸¤æ­¥éª¤ï¼Œä¸€ä¸ªå¯èƒ½å¤šäº†â€œæ£€æŸ¥åº“å­˜â€è¿™ä¸ªæ­¥éª¤

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d9bcf3585e41410683ad6b49d7b7982e~tplv-k3u1fbpfcp-zoom-1.image)

ä½ ä¸ç”±æƒŠäº†ï¼Œå“å‘€å¦ˆå‘€ï¼Œ**è€å¤«èŠå‘å°‘å¹´ç‹‚ï¼Œé”®ç›˜ä¼ºå€™ï¼ŒCtrl C + Ctrl V**ï¼Œç›´æ¥copyç„¶åæ”¹ä¸€ä¸‹é€»è¾‘ï¼Ÿï¼Ÿ

è¿™é‡Œå°±æ˜¯è¦è®²çš„è´£ä»»é“¾æ¨¡å¼ã€‚

## è´£ä»»é“¾æ¨¡å¼

ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼å‘¢ï¼Ÿæˆ‘ç»™ä½ ä»¬æ‰¾äº†ä¸ªå®šä¹‰ : é¿å…è¯·æ±‚å‘é€è€…ä¸æ¥æ”¶è€…è€¦åˆåœ¨ä¸€èµ·ï¼Œè®©å¤šä¸ªå¯¹è±¡éƒ½æœ‰å¯èƒ½æ¥æ”¶è¯·æ±‚ï¼Œå°†è¿™äº›å¯¹è±¡è¿æ¥æˆä¸€æ¡é“¾ï¼Œå¹¶ä¸”æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚

```js
const Chain = function(fn) {
  this.fn = fn;
  
  this.setNext = function() {}

  this.run = function() {}
}

const applyDevice = function() {}
const chainApplyDevice = new Chain(applyDevice);

const selectAddress = function() {}
const chainSelectAddress = new Chain(selectAddress);

const selectChecker = function() {}
const chainSelectChecker = new Chain(selectChecker);

// è¿ç”¨è´£ä»»é“¾æ¨¡å¼å®ç°ä¸Šè¾¹åŠŸèƒ½
chainApplyDevice.setNext(chainSelectAddress).setNext(chainSelectChecker);
chainApplyDevice.run();
å¤åˆ¶ä»£ç 
```

è¿™æ ·çš„å¥½å¤„æ˜¯å•¥ï¼Ÿé¦–å…ˆæ˜¯è§£è€¦äº†å„èŠ‚ç‚¹å…³ç³»ï¼Œä¹‹å‰çš„æ–¹å¼æ˜¯ A é‡Œè¾¹è¦å†™ Bï¼ŒB é‡Œè¾¹å†™ Cï¼Œä½†æ˜¯è¿™é‡Œä¸åŒäº†ï¼Œä½ å¯ä»¥åœ¨ B é‡Œè¾¹å•¥éƒ½ä¸å†™ã€‚

å…¶æ¬¡ï¼Œå„èŠ‚ç‚¹çµæ´»æ‹†åˆ†é‡ç»„ï¼Œæ­£å¦‚ä¸Šè¾¹ä½ æ¥çš„ä¸¤ä¸ªæ–°éœ€æ±‚ã€‚æ¯”å¦‚ä¸¤ä¸ªæ­¥éª¤çš„ä½ å°±åªéœ€è¦è¿™ä¹ˆå†™å®Œäº‹

```js
const applyLincense = function() {}
const chainApplyLincense = new Chain(applyLincense);

const selectChecker = function() {}
const chainSelectChecker = new Chain(selectChecker);

// è¿ç”¨è´£ä»»é“¾æ¨¡å¼å®ç°ä¸Šè¾¹åŠŸèƒ½
chainApplyLincense.setNext(chainSelectChecker);
chainApplyLincense.run();
å¤åˆ¶ä»£ç 
```

#### ä»€ä¹ˆæ—¶å€™ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼ï¼Ÿ

å½“ä½ è´Ÿè´£çš„æ¨¡å—ï¼ŒåŸºæœ¬æ»¡è¶³ä»¥ä¸‹æƒ…å†µæ—¶

- ä½ è´Ÿè´£çš„æ˜¯ä¸€ä¸ªå®Œæ•´æµç¨‹ï¼Œæˆ–ä½ åªè´Ÿè´£æµç¨‹ä¸­çš„æŸä¸ªç¯èŠ‚
- å„ç¯èŠ‚å¯å¤ç”¨
- å„ç¯èŠ‚æœ‰ä¸€å®šçš„æ‰§è¡Œé¡ºåº
- å„ç¯èŠ‚å¯é‡ç»„



## å‘½ä»¤æ¨¡å¼

å‘½ä»¤æ¨¡å¼ä¸[ç­–ç•¥æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/Basic Skill/è®¾è®¡æ¨¡å¼/ç­–ç•¥æ¨¡å¼.md)æœ‰äº›ç±»ä¼¼, åœ¨ JavaScript ä¸­å®ƒä»¬éƒ½æ˜¯éšå¼çš„ã€‚

é‡è¦æ€§: è¾ƒä½

### JavaScript ä¸­çš„å‘½ä»¤æ¨¡å¼

å‘½ä»¤æ¨¡å¼åœ¨ JavaScript ä¸­ä¹Ÿæ¯”è¾ƒç®€å•, ä¸‹é¢ä»£ç ä¸­å¯¹`æŒ‰é’®`å’Œ`å‘½ä»¤`è¿›è¡Œäº†æŠ½ç¦», å› æ­¤å¯ä»¥å¤æ‚é¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨å‘½ä»¤æ¨¡å¼å°†ç•Œé¢çš„ä»£ç å’ŒåŠŸèƒ½çš„ä»£ç äº¤ä»˜ç»™ä¸åŒçš„äººå»å†™ã€‚

```js
const setCommand = function(button, command) {
  button.onClick = function() {
    command.excute()
  }
}

// --------------------  ä¸Šé¢çš„ç•Œé¢é€»è¾‘ç”±Aå®Œæˆ, ä¸‹é¢çš„ç”±Bå®Œæˆ

const menu = {
  updateMenu: function() {
    console.log('æ›´æ–°èœå•')
  },
}

const UpdateCommand = function(receive) {
  return {
    excute: receive.updateMenu,
  }
}

const updateCommand = UpdateCommand(menu) // åˆ›å»ºå‘½ä»¤

const button1 = document.getElementById('button1')
setCommand(button1, updateCommand)
```

## ç»„åˆæ¨¡å¼

- ç»„åˆæ¨¡å¼åœ¨å¯¹è±¡é—´å½¢æˆ`æ ‘å½¢ç»“æ„`;
- ç»„åˆæ¨¡å¼ä¸­åŸºæœ¬å¯¹è±¡å’Œç»„åˆå¯¹è±¡è¢«`ä¸€è‡´å¯¹å¾…`;
- æ— é¡»å…³å¿ƒå¯¹è±¡æœ‰å¤šå°‘å±‚, è°ƒç”¨æ—¶åªéœ€åœ¨æ ¹éƒ¨è¿›è¡Œè°ƒç”¨;

### demo1 â€”â€” å®å‘½ä»¤

æƒ³è±¡æˆ‘ä»¬ç°åœ¨æ‰‹ä¸Šæœ‰ä¸ªä¸‡èƒ½é¥æ§å™¨, å½“æˆ‘ä»¬å›å®¶, æŒ‰ä¸€ä¸‹å¼€å…³, ä¸‹åˆ—äº‹æƒ…å°†è¢«æ‰§è¡Œ:

```
1. ç…®å’–å•¡
2. æ‰“å¼€ç”µè§†ã€æ‰“å¼€éŸ³å“
3. æ‰“å¼€ç©ºè°ƒã€æ‰“å¼€ç”µè„‘
```

æˆ‘ä»¬æŠŠä»»åŠ¡åˆ’åˆ†ä¸º 3 ç±», æ•ˆæœå›¾å¦‚ä¸‹:

[![img](https://camo.githubusercontent.com/80d7d3fe0bc979b362f9b4aaf154100eeb46f0e44ea1f44f380f5c2dd2269d9a/687474703a2f2f776974682e6d7579756e79756e2e636e2f39633837636538333535313566336439623630613836613066323838393764392e6a70672d343030)](https://camo.githubusercontent.com/80d7d3fe0bc979b362f9b4aaf154100eeb46f0e44ea1f44f380f5c2dd2269d9a/687474703a2f2f776974682e6d7579756e79756e2e636e2f39633837636538333535313566336439623630613836613066323838393764392e6a70672d343030)

æ¥ç€çœ‹çœ‹ç»“åˆäº†[å‘½ä»¤æ¨¡å¼](https://github.com/MuYunyun/blog/blob/master/Basic Skill/è®¾è®¡æ¨¡å¼/å‘½ä»¤æ¨¡å¼.md)å’Œç»„åˆæ¨¡å¼çš„å…·ä½“å®ç°:

```
const MacroCommand = function() {
  return {
    lists: [],
    add: function(task) {
      this.lists.push(task)
    },
    excute: function() { // â‘ : ç»„åˆå¯¹è±¡è°ƒç”¨è¿™é‡Œçš„ excute,
      for (let i = 0; i < this.lists.length; i++) {
        this.lists[i].excute()
      }
    },
  }
}

const command1 = MacroCommand() // åŸºæœ¬å¯¹è±¡

command1.add({
  excute: () => console.log('ç…®å’–å•¡') // â‘¡: åŸºæœ¬å¯¹è±¡è°ƒç”¨è¿™é‡Œçš„ excute,
})

const command2 = MacroCommand() // ç»„åˆå¯¹è±¡

command2.add({
  excute: () => console.log('æ‰“å¼€ç”µè§†')
})

command2.add({
  excute: () => console.log('æ‰“å¼€éŸ³å“')
})

const command3 = MacroCommand()

command3.add({
  excute: () => console.log('æ‰“å¼€ç©ºè°ƒ')
})

command3.add({
  excute: () => console.log('æ‰“å¼€ç”µè„‘')
})

const macroCommand = MacroCommand()
macroCommand.add(command1)
macroCommand.add(command2)
macroCommand.add(command3)

macroCommand.excute()

// ç…®å’–å•¡
// æ‰“å¼€ç”µè§†
// æ‰“å¼€éŸ³å“
// æ‰“å¼€ç©ºè°ƒ
// æ‰“å¼€ç”µè„‘
```

å¯ä»¥çœ‹å‡ºåœ¨ç»„åˆæ¨¡å¼ä¸­åŸºæœ¬å¯¹è±¡å’Œç»„åˆå¯¹è±¡è¢«ä¸€è‡´å¯¹å¾…, æ‰€ä»¥è¦ä¿è¯åŸºæœ¬å¯¹è±¡(å¶å¯¹è±¡)å’Œç»„åˆå¯¹è±¡å…·æœ‰ä¸€è‡´æ–¹æ³•ã€‚

### demo2 â€”â€” æ‰«ææ–‡ä»¶å¤¹

æ‰«ææ–‡ä»¶å¤¹æ—¶, æ–‡ä»¶å¤¹ä¸‹é¢å¯ä»¥ä¸ºå¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¹Ÿå¯ä»¥ä¸ºæ–‡ä»¶, æˆ‘ä»¬å¸Œæœ›ç»Ÿä¸€å¯¹å¾…è¿™äº›æ–‡ä»¶å¤¹å’Œæ–‡ä»¶, è¿™ç§æƒ…å½¢é€‚åˆä½¿ç”¨ç»„åˆæ¨¡å¼ã€‚

```js
const Folder = function(folder) {
  this.folder = folder
  this.lists = []
}

Folder.prototype.add = function(resource) {
  this.lists.push(resource)
}

Folder.prototype.scan = function() {
  console.log('å¼€å§‹æ‰«ææ–‡ä»¶å¤¹: ', this.folder)
  for (let i = 0, folder; folder = this.lists[i++];) {
    folder.scan()
  }
}

const File = function(file) {
  this.file = file
}

File.prototype.add = function() {
  throw Error('æ–‡ä»¶ä¸‹ä¸èƒ½æ·»åŠ å…¶å®ƒæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶')
}

File.prototype.scan = function() {
  console.log('å¼€å§‹æ‰«ææ–‡ä»¶: ', this.file)
}

const folder = new Folder('æ ¹æ–‡ä»¶å¤¹')
const folder1 = new Folder('JS')
const folder2 = new Folder('life')

const file1 = new File('æ·±å…¥ReactæŠ€æœ¯æ ˆ.pdf')
const file2 = new File('JavaScriptæƒå¨æŒ‡å—.pdf')
const file3 = new File('å°ç‹å­.pdf')

folder1.add(file1)
folder1.add(file2)

folder2.add(file3)

folder.add(folder1)
folder.add(folder2)

folder.scan()

// å¼€å§‹æ‰«ææ–‡ä»¶å¤¹:  æ ¹æ–‡ä»¶å¤¹
// å¼€å§‹æ‰«ææ–‡ä»¶å¤¹:  JS
// å¼€å§‹æ‰«ææ–‡ä»¶:  æ·±å…¥ReactæŠ€æœ¯æ ˆ.pdf
// å¼€å§‹æ‰«ææ–‡ä»¶:  JavaScriptæƒå¨æŒ‡å—.pdf
// å¼€å§‹æ‰«ææ–‡ä»¶å¤¹:  life
// å¼€å§‹æ‰«ææ–‡ä»¶:  å°ç‹å­.pdf
```

## æ¨¡æ¿æ–¹æ³•æ¨¡å¼

å®šä¹‰: åœ¨ç»§æ‰¿çš„åŸºç¡€ä¸Š, åœ¨çˆ¶ç±»ä¸­å®šä¹‰å¥½æ‰§è¡Œçš„ç®—æ³•ã€‚

### æ³¡èŒ¶å’Œæ³¡å’–å•¡

æ¥å¯¹æ¯”ä¸‹æ³¡èŒ¶å’Œæ³¡å’–å•¡è¿‡ç¨‹ä¸­çš„å¼‚åŒ

| æ­¥éª¤ | æ³¡èŒ¶     | æ³¡å’–å•¡   |
| ---- | -------- | -------- |
| 1    | çƒ§å¼€æ°´   | çƒ§å¼€æ°´   |
| 2    | æµ¸æ³¡èŒ¶å¶ | å†²æ³¡å’–å•¡ |
| 3    | å€’å…¥æ¯å­ | å€’å…¥æ¯å­ |
| 4    | åŠ æŸ æª¬   | åŠ ç³–     |

å¯ä»¥æ¸…æ™°åœ°çœ‹å‡ºä»…ä»…åœ¨æ­¥éª¤ 2 å’Œ 4 ä¸Šæœ‰ç»†å¾®çš„å·®åˆ«, ä¸‹é¢ç€æ‰‹å®ç°:

```
const Drinks = function() {}

Drinks.prototype.firstStep = function() {
  console.log('çƒ§å¼€æ°´')
}

Drinks.prototype.secondStep = function() {}

Drinks.prototype.thirdStep = function() {
  console.log('å€’å…¥æ¯å­')
}

Drinks.prototype.fourthStep = function() {}

Drinks.prototype.init = function() { // æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ ¸å¿ƒ: åœ¨çˆ¶ç±»ä¸Šå®šä¹‰å¥½æ‰§è¡Œç®—æ³•
  this.firstStep()
  this.secondStep()
  this.thirdStep()
  this.fourthStep()
}

const Tea = function() {}

Tea.prototype = new Drinks

Tea.prototype.secondStep = function() {
  console.log('æµ¸æ³¡èŒ¶å¶')
}

Tea.prototype.fourthStep = function() {
  console.log('åŠ æŸ æª¬')
}

const Coffee = function() {}

Coffee.prototype = new Drinks

Coffee.prototype.secondStep = function() {
  console.log('å†²æ³¡å’–å•¡')
}

Coffee.prototype.fourthStep = function() {
  console.log('åŠ ç³–')
}

const tea = new Tea()
tea.init()

// çƒ§å¼€æ°´
// æµ¸æ³¡èŒ¶å¶
// å€’å…¥æ¯å­
// åŠ æŸ æª¬

const coffee = new Coffee()
coffee.init()

// çƒ§å¼€æ°´
// å†²æ³¡å’–å•¡
// å€’å…¥æ¯å­
// åŠ ç³–
```

### é’©å­

å‡å¦‚å®¢äººä¸æƒ³åŠ ä½æ–™(ç³–ã€æŸ æª¬)æ€ä¹ˆåŠ, è¿™æ—¶å¯ä»¥å¼•äººé’©å­æ¥å®ç°ä¹‹, å®ç°é€»è¾‘å¦‚ä¸‹:

```
// ...

Drinks.prototype.ifNeedFlavour = function() { // åŠ ä¸Šé’©å­
  return true
}

Drinks.prototype.init = function() { // æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ ¸å¿ƒ: åœ¨çˆ¶ç±»ä¸Šå®šä¹‰å¥½æ‰§è¡Œç®—æ³•
  this.firstStep()
  this.secondStep()
  this.thirdStep()
  if (this.ifNeedFlavour()) { // é»˜è®¤æ˜¯ true, ä¹Ÿå°±æ˜¯è¦åŠ è°ƒæ–™
    this.fourthStep()
  }
}

// ...
const Coffee = function() {}

Coffee.prototype = new Drinks()
// ...

Coffee.prototype.ifNeedFlavour = function() {
  return window.confirm('æ˜¯å¦éœ€è¦ä½æ–™å—ï¼Ÿ') // å¼¹æ¡†é€‰æ‹©æ˜¯å¦ä½æ–™
}
```

## äº«å…ƒæ¨¡å¼

äº«å…ƒæ¨¡å¼æ˜¯ä¸€ç§ä¼˜åŒ–ç¨‹åºæ€§èƒ½çš„æ¨¡å¼, æœ¬è´¨ä¸º`å‡å°‘å¯¹è±¡åˆ›å»ºçš„ä¸ªæ•°`ã€‚

ä»¥ä¸‹æƒ…å†µå¯ä»¥ä½¿ç”¨äº«å…ƒæ¨¡å¼:

1. æœ‰å¤§é‡ç›¸ä¼¼çš„å¯¹è±¡, å ç”¨äº†å¤§é‡å†…å­˜
2. å¯¹è±¡ä¸­å¤§éƒ¨åˆ†çŠ¶æ€å¯ä»¥æŠ½ç¦»ä¸ºå¤–éƒ¨çŠ¶æ€

### demo

æŸå•†å®¶æœ‰ 50 ç§ç”·æ¬¾å†…è¡£å’Œ 50 ç§æ¬¾å¥³æ¬¾å†…è¡£, è¦å±•ç¤ºå®ƒä»¬

æ–¹æ¡ˆä¸€: é€  50 ä¸ªå¡‘æ–™ç”·æ¨¡å’Œ 50 ä¸ªå¡‘æ–™å¥³æ¨¡, è®©ä»–ä»¬ç©¿ä¸Šå±•ç¤º, ä»£ç å¦‚ä¸‹:

```
const Model = function(gender, underwear) {
  this.gender = gender
  this.underwear = underwear
}

Model.prototype.takephoto = function() {
  console.log(`${this.gender}ç©¿ç€${this.underwear}`)
}

for (let i = 1; i < 51; i++) {
  const maleModel = new Model('male', `ç¬¬${i}æ¬¾è¡£æœ`)
  maleModel.takephoto()
}

for (let i = 1; i < 51; i++) {
  const female = new Model('female', `ç¬¬${i}æ¬¾è¡£æœ`)
  female.takephoto()
}
```

æ–¹æ¡ˆäºŒ: é€  1 ä¸ªå¡‘æ–™ç”·æ¨¡ç‰¹ 1 ä¸ªå¡‘æ–™å¥³æ¨¡ç‰¹, åˆ†åˆ«è¯•ç©¿ 50 æ¬¾å†…è¡£

```
const Model = function(gender) {
  this.gender = gender
}

Model.prototype.takephoto = function() {
  console.log(`${this.sex}ç©¿ç€${this.underwear}`)
}

const maleModel = new Model('male')
const femaleModel = new Model('female')

for (let i = 1; i < 51; i++) {
  maleModel.underwear = `ç¬¬${i}æ¬¾è¡£æœ`
  maleModel.takephoto()
}

for (let i = 1; i < 51; i++) {
  femaleModel.underwear = `ç¬¬${i}æ¬¾è¡£æœ`
  femaleModel.takephoto()
}
```

å¯¹æ¯”å‘ç°: æ–¹æ¡ˆä¸€åˆ›å»ºäº† 100 ä¸ªå¯¹è±¡, æ–¹æ¡ˆäºŒåªåˆ›å»ºäº† 2 ä¸ªå¯¹è±¡, åœ¨è¯¥ demo ä¸­, gender(æ€§åˆ«) æ˜¯å†…éƒ¨å¯¹è±¡, underwear(ç©¿ç€) æ˜¯å¤–éƒ¨å¯¹è±¡ã€‚

å½“ç„¶åœ¨æ–¹æ¡ˆäºŒçš„ demo ä¸­, è¿˜å¯ä»¥è¿›ä¸€æ­¥æ”¹å–„:

1. ä¸€å¼€å§‹å°±é€šè¿‡æ„é€ å‡½æ•°æ˜¾ç¤ºåœ°åˆ›å»ºå®ä¾‹, å¯ç”¨å·¥åœºæ¨¡å¼å°†å…¶å‡çº§æˆå¯æ§ç”Ÿæˆ
2. åœ¨å®ä¾‹ä¸Šæ‰‹åŠ¨æ·»åŠ  underwear ä¸æ˜¯å¾ˆä¼˜é›…, å¯ä»¥åœ¨å¤–éƒ¨å•ç‹¬åœ¨å†™ä¸ª manager å‡½æ•°

```
const Model = function(gender) {
  this.gender = gender
}

Model.prototype.takephoto = function() {
  console.log(`${this.gender}ç©¿ç€${this.underwear}`)
}

const modelFactory = (function() { // ä¼˜åŒ–ç¬¬ä¸€ç‚¹
  const modelGender = {}
  return {
    createModel: function(gender) {
      if (modelGender[gender]) {
        return modelGender[gender]
      }
      return modelGender[gender] = new Model(gender)
    }
  }
}())

const modelManager = (function() {
  const modelObj = {}
  return {
    add: function(gender, i) {
      modelObj[i] = {
        underwear: `ç¬¬${i}æ¬¾è¡£æœ`
      }
      return modelFactory.createModel(gender)
    },
    copy: function(model, i) { // ä¼˜åŒ–ç¬¬äºŒç‚¹
      model.underwear = modelObj[i].underwear
    }
  }
}())

for (let i = 1; i < 51; i++) {
  const maleModel = modelManager.add('male', i)
  modelManager.copy(maleModel, i)
  maleModel.takephoto()
}

for (let i = 1; i < 51; i++) {
  const femaleModel = modelManager.add('female', i)
  modelManager.copy(femaleModel, i)
  femaleModel.takephoto()
}
```

## ç»“å°¾

ä¸çŸ¥ä¸è§‰ï¼Œåˆæ˜¯ç»™å¤§å®¶æ’¸äº†ä¸€ç¯‡è®¾è®¡æ¨¡å¼çš„æ–‡ç« ï¼Œè®¾è®¡æ¨¡å¼çœŸçš„å¾ˆé‡è¦ï¼Œè™½ç„¶è¯´æˆ‘ä¹Ÿåˆšé¢†æ‚Ÿå…¶ä¸­çš„ä¸€ä¸è¯€çªï¼Œ**ä½†æ˜¯æˆ‘æƒ³ï¼Œå¯èƒ½è¿˜æœ‰å¾ˆå¤šè·Ÿæˆ‘ä¸€æ ·ï¼Œåœ¨è®¾è®¡æ¨¡å¼é—¨æ§›å¤–ï¼Œè¿Ÿè¿Ÿæ— æ³•é¡¿æ‚Ÿçš„å°ä¼™ä¼´**ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå¾ˆçƒ¦çœ‹é•¿ç¯‡å¤§è®ºçš„äººï¼Œä¹‹å‰ä¹Ÿçœ‹äº†è®¾è®¡æ¨¡å¼ç›¸å…³ä¹¦ç±ï¼Œåˆæ¬¡çœ‹è¿˜èƒ½è€å¿ƒçœ‹ä¸‹å»ï¼Œä½†æ˜¯å»çœ‹åˆ«äººåšå®¢ã€æ–‡ç« çš„æ—¶å€™ï¼Œçœ‹åˆ°å¥½å¤šå®šä¹‰ã€å¥½å¤šç†è®ºï¼ŒåŒ…æ‹¬ä¸€äº›ä¸¾çš„ğŸŒ°ï¼Œæ„Ÿè§‰å½“æ—¶æ‡‚äº†ï¼Œä½†æ˜¯åœ¨å¼€å‘ä¸­ï¼Œæˆ‘è¿˜æ˜¯ä¸çŸ¥é“æ€ä¹ˆç”¨...

ä¸æ˜¯è®©å¤§å®¶å¼ºè¡Œå¥—ç”¨è®¾è®¡æ¨¡å¼ï¼Œè€Œæ˜¯æƒ³è¡¨è¾¾ : æˆ‘ä»¬é¦–å…ˆéœ€è¦ç†è§£ï¼Œå…¶æ¬¡éœ€è¦å½¢æˆä¸€ç§è‚Œè‚‰è®°å¿†ï¼Œæ­£å¦‚å‰è¾¹è¯´çš„ç­–ç•¥æ¨¡å¼ã€å‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„ä¾‹å­ä¸€æ ·ï¼Œå¤§å®¶åœ¨çœŸå®å¼€å‘åœºæ™¯ä¸­è‚¯å®šéƒ½æœ‰é‡åˆ°ï¼Œåªæ˜¯æ²¡æœ‰æƒ³åˆ°ï¼ŒåŸæ¥è¿™å°±æ˜¯è®¾è®¡æ¨¡å¼ï¼Œæˆ–è€…è¯´ï¼ŒåŸæ¥è¿™é‡Œå¯ä»¥ç”¨åˆ°è®¾è®¡æ¨¡å¼å»è®¾è®¡ã€‚

è¿™ç¯‡æ–‡ç« ï¼Œå…¶ä¸­ä¸‰ä¸ªé¢˜ç›®æ¥è‡ªæ½‡å“¥åˆ†äº«çš„PPTï¼Œå¹¶ä¸”æ€ç»´å¯¼å›¾ä¹Ÿæ˜¯ä»–ç”»çš„ï¼Œç»è¿‡ä»–çš„åŒæ„ï¼Œæˆ‘å°†å…¶æ•´ç†æˆäº†ä¸€ç¯‡æ–‡ç« ï¼ŒåŒæ—¶ç»“åˆæˆ‘è‡ªå·±çš„ç†è§£ï¼Œå°½å¯èƒ½ä»¥ä¸€ç§å¹½é»˜ã€é£è¶£ã€æ˜“æ‡‚çš„å½¢å¼ï¼Œè·Ÿå¤§å®¶å” å—‘å” å—‘ä¸€ä¸‹ï¼Œ**å¦‚æœæˆ‘æœ‰è¯´çš„ä¸å¯¹æˆ–è€…å­˜åœ¨è¯¯è§£çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶æŒ‡å‡º**~ Thank you ~

å¯¹äº†ï¼Œå‰å‡ å¤©å†™äº†ä¸€ç¯‡ [å‰ç«¯æ¸£æ¸£çš„æˆ‘å†ä¹Ÿä¸æ•¢è¯´æˆ‘ä¼šå†™Buttonç»„ä»¶äº†](https://juejin.im/post/6844904134047432711) æ–‡ç« ï¼Œç„¶åå‘ç°è¢«äººè½¬åˆ°ä¸ªäººå…¬ä¼—å·äº†ï¼Œè¦ä¸æ˜¯å­¦å¼Ÿå‘ŠçŸ¥æˆ‘ï¼Œæˆ‘è¿˜ä¸çŸ¥é“åŸæ¥æˆ‘çš„æ–‡ç« è¢«å…¬ä¼—å·è¥é”€ç»™è½¬èµ°äº†ã€‚è™½ç„¶å¤‡æ³¨äº†åŸæ–‡å‡ºå¤„ï¼Œä½†æ˜¯è¿˜æ˜¯æƒ³è¯´ï¼Œä½ è½¬æˆ‘çš„æ–‡ç« ï¼Œæœ€èµ·ç è¯„è®ºåŒºé‡ŒçŸ¥ä¼šä¸€å£°å§~

çœ‹è¿‡æˆ‘æ–‡ç« çš„å°ä¼™ä¼´éƒ½çŸ¥é“ï¼Œæˆ‘å‡ ä¹æ˜¯ä¸€ä¸ªæœˆæ‰æ›´ä¸€ä¸¤ç¯‡åšå®¢ï¼Œä¸æ˜¯æˆ‘ä¸æƒ³æ›´æ–°ï¼Œè€Œæ˜¯æˆ‘æƒ³åšæœ‰ç”Ÿå‘½æœ‰æ´»åŠ›çš„æ–‡ç« ï¼Œæ˜¯çœŸçš„æœ‰å»äº†è§£ã€å»åšå®è·µã€å»çœ‹æºç ï¼Œç„¶åä¸€å­—ä¸€å­—çš„åœ¨ç”µè„‘æ¡Œå‰ï¼Œæ•´ç†æˆä¸€ç¯‡**ç®—å¾—ä¸Šèƒ½æœ‰ä¸€ä¸å¸®åŠ©**çš„æ–‡ç« ï¼Œå†™è¿™ä¹ˆä¸€ç¯‡ï¼Œå¯èƒ½å°±éœ€è¦æˆ‘ä¸€ä¸‹åˆç”šè‡³ä¸€å¤©çš„æ—¶é—´ï¼Œä½ å€’å¥½ï¼Œç›´æ¥ Ctrl C + Ctrl Vï¼ŒæŠŠæˆ‘æ–‡ç« æŠ„è¿‡å»äº†ï¼Œç„¶åå†è´´ä¸ªåŸæ–‡é“¾æ¥ï¼Œæˆ‘...

æˆ‘ä¸æ˜¯ä¸å…è®¸ä½ è½¬ï¼Œä½ æœ€èµ·ç å‘ŠçŸ¥æˆ‘ä¸€å£°å–~ æˆ‘ : ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ

ç®—äº†ç®—äº†ï¼Œä¸è¯´äº†ï¼Œæ„Ÿè°¢çœ‹å®˜çœ‹åˆ°è¿™é‡Œï¼Œæ–‡ä¸­æºç æˆ‘æ”¾è¿™é‡Œäº† [è®¾è®¡æ¨¡å¼demoæºç ](https://github.com/PDKSophia/DesignPatternsToJS/tree/master/eaxmple)ï¼Œæƒ³çœ‹çš„è‡ªå– ~

## ç›¸å…³é“¾æ¥

- [é˜¿å®½çš„åšå®¢](https://github.com/PDKSophia/blog.io)
- [è‹æ ¼å›¢é˜Ÿ](https://juejin.im/user/3526889001458910)

## æ›´å¤šæ–‡ç« 

- [ã€KTã€‘è½»æ¾æå®šReduxæºç è§£è¯»ä¸ç¼–ç¨‹è‰ºæœ¯](https://juejin.im/post/6844904183426973703)
- [ã€KTã€‘æ„å»ºè‡ªå·±çš„å‰ç«¯çŸ¥è¯†ä½“ç³»](https://juejin.im/post/6844904200241938439)
- [ã€KTã€‘å‰ç«¯æ¸£æ¸£çš„æˆ‘å†ä¹Ÿä¸æ•¢è¯´æˆ‘ä¼šå†™Buttonç»„ä»¶äº†](https://juejin.im/post/6844904134047432711)


ä½œè€…ï¼šå½­é“å®½
é“¾æ¥ï¼šhttps://juejin.cn/post/6844904138707337229
æ¥æºï¼šæ˜é‡‘
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

### å‚è€ƒæ–‡çŒ®

*ã€ŠJavaScriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹

ä½œè€…ï¼šç‰§äº‘äº‘
é“¾æ¥ï¼šhttps://juejin.cn/post/6844903607452581896
æ¥æºï¼šæ˜é‡‘
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

